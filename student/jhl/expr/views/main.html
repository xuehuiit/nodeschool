<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        window.onload = function () {
            const name = document.getElementById('name'),
                age = document.getElementById('age'),
                post = document.getElementById('post'),
                create = document.getElementById('create')

                name.set = function(val){
                    this.value = val
                }
                name.get = function(){
                    return this.value
                }
            create.onclick = function (ev) {
                let data = {
                    name:name.value,
                    age:age.value,
                    password: "111"
                }
                if (ev.target==create) {
                    let xhr;

                    if (window.XMLHttpRequest) {
                        xhr = new XMLHttpRequest()
                    }else {
                        xhr = new ActiveXObject("Microsoft.XMLHTTP")
                    }
                    xhr.open("POST",'/users/create',true)
                    xhr.setRequestHeader('Content-Type',"application/json;charset=UTF-8");
                    xhr.onreadystatechange = function(){
                        if (xhr.status==400&&xhr.readyState==4){
                            console.log(xhr.responseText)
                        }
                    }
                    xhr.send(JSON.stringify(data));

                }
            }
        }
    </script>
</head>
<body>
<table>
    <thead>
    <tr>
        <th>姓名</th>
        <th>年龄</th>
        <th>操作</th>
    </tr>
    <tr>
        <th><input type="text" id="name"></th>
        <th><input type="text" id="age"></th>
        <th><button id="create">创建</button></th>
    </tr>
    </thead>
    <tbody>
    {%for user in users%}
    <tr>
        <td>{{user.name}}</td>
        <td>{{user.age}}</td>
        <td><button id="post{{user.id}}"></button></td>
    </tr>
    {%endfor%}
    </tbody>
</table>
</body>
</html>